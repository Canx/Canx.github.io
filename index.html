<!DOCTYPE html>
<html>
<head>
<title>Mapa del centre</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

<nav class="navbar" role="navigation" aria-label="main navigation">
  <!--<div class="navbar-brand">
    <a class="navbar-item href="https://mestreacasa.gva.es/web/iesbenetusser">
      <img src="https://mestreacasa.gva.es/image/layout_set_logo?img_id=500009856737&t=1629959381207" width="28" height="28">
    </a>
    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>-->
  <div class="navbar-menu is-active">
    <div class="navbar-item field">
      <div class="control has-icons-right">
        <input id="search-field" class="input search" type="text" placeholder="Cercar..."/>
        <span class="icon is-small is-right">
          <i class="fas fa-search"></i>
        </span>
      </div>
    </div>
  </div>
</nav>

<div id="lista-centro" class="container">
    <ul class="list"></ul>
</div>

<!--<div style="display:none;">
  <div onclick="" style="cursor: pointer;"class="card" id="lista-item">
    <header class="card-header">
      <p class="card-header-title nombre"></p>
    </header>
    <div class="card-content">
      <div class="content desc"></div>
    </div>
  </div>
</div>-->
  <!--<li id="lista-item">
      <div class="nombre"></div>
      <div class="desc mx-6"></div>
  </li>-->

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js" integrity="sha512-93wYgwrIFL+b+P3RvYxi/WUFRXXUDSLCT2JQk9zhVGXuS2mHl2axj6d+R6pP+gcU5isMHRj1u0oYE/mWyt/RjA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script>

var options = {
  item: function(values) {
	  // Si aparece la sección, solo es sección
	  if (values.seccion) {
	    return `<h1 class="title has-background-grey-light">${values.seccion}`;
	  }
	  var html_enlace = "";
	  var html_desc = "";
	  // Si aparece el enlace es clickable
	  if (values.enlace) {
	    html_enlace = `onclick="window.open('${values.enlace}');" style="cursor: pointer;" `
	  }
          else {

	  }

	  // Si aparece la descripción la ponemos
          if (values.desc) {
            html_desc = `<div class="card-content">
    <div class="content desc">${values.desc}</div>
  </div>`
          }
	  return `<li><div class="card">
	  <header ${html_enlace} class="card-header">
    <p class="card-header-title nombre has-background-light">
      ${values.nombre}
    </>
  </header>
  ${html_desc}
  </div></li>`;
  }
};


$(document).ready(function() {

  // Check for click events on the navbar burger icon
  $(".navbar-burger").click(function() {

      // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
      $(".navbar-burger").toggleClass("is-active");
      $(".navbar-menu").toggleClass("is-active");

  });
});

  // Add card
var listaCentro = new List('lista-centro', options);
var values = [];
//values.push({ seccion: "Enlaces" });
//values.push({ nombre: "Prueba", desc: "Esto es una prueba", enlace: "https://www.google.es" });
//values.push({ nombre: "Caca" });
//listaCentro.add(values);

$('#search-field').on('keyup', function() {
  var searchString = $(this).val();
  listaCentro.search(searchString);
});

fetch('https://script.google.com/macros/s/AKfycbzluh_D_hAvkd2tGMcD9n8PQNaJ7MZSUyZqNj2Bbr6-jhyp-AS7INum3PpLQcOv7WTjhQ/exec')
  .then(res => res.json())       
  .then((out) => {
        out["data"].forEach(function(elemento) { 
            values.push({ seccion: elemento["seccion"], nombre: elemento["nombre"], desc: elemento["desc"], enlace: elemento["enlace"] });
          });
        listaCentro.add(values);
      })
   .catch(err => console.error(err));
</script>
</html> 
